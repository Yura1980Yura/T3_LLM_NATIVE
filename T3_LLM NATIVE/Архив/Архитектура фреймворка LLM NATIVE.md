# Архитектура фреймворка LLM NATIVE

## 🏗️ Основные компоненты

### 1. Модули (Базовый уровень)

Атомарные переиспользуемые компоненты системы. Существует 5 типов модулей:

- **Функциональные модули** - атомарные функции обработки данных
- **Сценарии (scenario)** - координаторы работы других модулей и управления потоком
- **Команды (command)** - модули взаимодействия с пользователем через триггеры
- **Инструкции (instruction)** - определяют поведение системы и стили обработки
- **Конфигурации (config)** - центральный модуль управления параметрами

### 2. Системы (Средний уровень)

- Создаются из модулей различных типов
- Основа системы - **pipeline** (центральный сценарий координации)
- В каждой системе всегда есть один модуль **Config** для управления параметрами
- Системы реализуют конкретную функциональность через композицию модулей

### 3. Суперсистемы (Верхний уровень)

- Собираются из систем и отдельных модулей
- Основа суперсистемы - **pipeline** высшего уровня
- В суперсистеме всегда есть один общий **Config**
- Оркестрируют работу нескольких систем для решения комплексных задач

### 4. Проект (Финальный уровень)

- Все проекты являются ПЛАТФОРМО-СПЕЦИФИЧНЫМИ
   - Проекты** - создаются под КОНКРЕТНУЮ платформу
   - **Реализация** - адаптирована под возможности платформы
   -  **Интеграция** - использует специфичные для платформы методы
- Содержит систему/суперсистему + платформо-специфичную обертку
- Pipeline системы/суперсистемы является центральным алгоритмом
- Включает инструкции для конкретной платформы

## 📊 Иерархия компонентов

```
┌─────────────────────────────────────────┐
│  🎯 ПЛАТФОРМО-СПЕЦИФИЧНЫЕ ПРОЕКТЫ       │
│  ├── Проект для API                     │
│  ├── Проект для Custom GPT              │
│  ├── Проект для Claude Projects         │
│  ├── Проект для Langchain               │
│  └── Проект для n8n/Make/Zapier         │
└──────────────┬──────────────────────────┘
               │
┌──────────────┴──────────────────────────┐
│  🎯 СУПЕРСИСТЕМЫ                        │
│  ├── Pipeline (центральный сценарий)    │
│  ├── Config (единый для суперсистемы)   │
│  └── Системы + Модули                   │
└──────────────┬──────────────────────────┘
               │
┌──────────────┴──────────────────────────┐
│  🔄 СИСТЕМЫ                             │
│  ├── Pipeline (центральный сценарий)    │
│  ├── Config (конфигурация системы)      │
│  └── Модули различных типов             │
└──────────────┬──────────────────────────┘
               │
┌──────────────┴──────────────────────────┐
│  🧩 МОДУЛИ                              │
│  ├── Функциональные                     │
│  ├── Сценарии                           │
│  ├── Команды                            │
│  ├── Инструкции                         │
│  └── Конфигурации                       │
└─────────────────────────────────────────┘
```

## 🔑 Ключевые принципы

1. **Модульность** - все компоненты независимы и переиспользуемы
2. **Pipeline-ориентированность** - центральный сценарий координирует работу
3. **Единая конфигурация** - один Config на систему/суперсистему
4. **Платформо-специфичность** - каждый проект под конкретную платформу
5. **Адаптация** - использование возможностей конкретной платформы
6. **Оптимизация** - максимальная эффективность в рамках платформы
7. **LLM-first** - LLM является полноценным разработчиком системы

## 📝 Особенности реализации

### Config (Модуль конфигурации)

- Центральный модуль управления параметрами
- Поддерживает динамическое изменение параметров
- Содержит реестр всех команд (command_registry)
- Управляет валидацией и приоритетами параметров

### Pipeline (Центральный сценарий)

- Координирует работу всех компонентов
- Определяет поток данных и последовательность операций
- Может быть как простым линейным, так и сложным с ветвлениями
- Использует естественный язык для описания логики

### Взаимодействие компонентов

- Модули вызывают друг друга через методы
- Сценарии координируют выполнение
- Команды обрабатываются через CommandRouter
- Инструкции применяются для изменения поведения
- Config обеспечивает единое управление параметрами